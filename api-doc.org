** TODO ImpLement list Scoreboard
*** TODO Object schema for req/res backend topic payload
*** TODO Implement backend api topic call
*** TODO Implement Task and Command
*** TODO Document the req/res payload
*** TODO Verify Team.normalize()
** list Registered Players
*** Backend request
#+begin_src js
  {
    timestamp: 1706642934817,
  }
#+end_src
*** Backend response
#+begin_src js
  {
    timestamp: 1706642934817,
    result: 'OK',
    players: [
      {
        username: 'Merry_2mpmnxcgv1s',
        name: 'Merry',
        surname: 'compassionate',
        email: 'Merry@gmail.com',
        wristbandMerged: false,
        wristband: null
      },
      {
        username: 'Wormtongue_klagnkjxqla',
        name: 'Wormtongue',
        surname: 'jovial',
        email: 'Wormtongue@gmail.com',
        wristbandMerged: false,
        wristband: { wristbandNumber: 230, wristbandColor: 3, active: true }
      },
      {
        username: '6t3o5ds227u',
        name: null,
        surname: null,
        email: null,
        wristbandMerged: false,
        wristband: null
      },
      {
        username: 'Elrond_6ofeexn83ma',
        name: 'Elrond',
        surname: 'vigilant',
        email: 'Elrond@gmail.com',
        wristbandMerged: true,
        wristband: { wristbandNumber: 231, wristbandColor: 4, active: true }
      },
      {
        username: 'ppthree',
        name: 'yolothree',
        surname: 'ggthree',
        email: 'ggthree@gmail.com',
        wristbandMerged: false,
        wristband: null
      },
    ]
  }
#+end_src
*** After Player.normalize()
#+begin_src js

  // Player.normalize(backend_res, { depth: 1, defaultState: 'registered' })
  const normalized = [
    {
      username: 'Merry_2mpmnxcgv1s',
      name: 'Merry',
      surname: 'compassionate',
      email: 'Merry@gmail.com',
      state: 'registered',
      wristband: { id: null, color: '', colorCode: null, state: 'unpaired' }
    },
    {
      username: 'Wormtongue_klagnkjxqla',
      name: 'Wormtongue',
      surname: 'jovial',
      email: 'Wormtongue@gmail.com',
      state: 'registered',
      wristband: { id: 230, color: 'green', colorCode: 3, state: 'paired' }
    },
    {
      username: '6t3o5ds227u',
      name: '',
      surname: '',
      email: '',
      state: 'registered',
      wristband: { id: null, color: '', colorCode: null, state: 'unpaired' }
    },
    {
      username: 'Elrond_6ofeexn83ma',
      name: 'Elrond',
      surname: 'vigilant',
      email: 'Elrond@gmail.com',
      state: 'inTeam',
      wristband: { id: 231, color: 'yellow', colorCode: 4, state: 'paired' }
    },
    {
      username: 'ppthree',
      name: 'yolothree',
      surname: 'ggthree',
      email: 'ggthree@gmail.com',
      state: 'registered',
      wristband: { id: null, color: '', colorCode: null, state: 'unpaired' }
    }
  ]
#+end_src
** list Registered Players with a Wristband
*** Backend response
#+begin_src js
  const response = {
    timestamp: 1706649848057,
    result: 'OK',
    players: [
      {
        username: 'Gilgalad_wsai1ooow3',
        name: 'Gilgalad',
        surname: 'sweet',
        email: 'Gilgalad@gmail.com',
        wristbandMerged: false,
        wristband: { wristbandNumber: 232, wristbandColor: 4, active: true }
      },
      {
        username: 'Gandalf_deil7sv8j4c',
        name: 'Gandalf',
        surname: 'busy',
        email: 'Gandalf@gmail.com',
        wristbandMerged: false,
        wristband: { wristbandNumber: 233, wristbandColor: 4, active: true }
      },
      {
        username: 'Galadriel_12k3dw52kkhi',
        name: 'Galadriel',
        surname: 'jovial',
        email: 'Galadriel@gmail.com',
        wristbandMerged: false,
        wristband: { wristbandNumber: 235, wristbandColor: 5, active: true }
      }
    ]
  }
#+end_src
*** After Player.normalize()
#+begin_src js
  // Player.normalize(response.players, { depth: 1, state: "registered" })
  const normalize = [
    {
      username: 'Gilgalad_wsai1ooow3',
      name: 'Gilgalad',
      surname: 'sweet',
      email: 'Gilgalad@gmail.com',
      state: 'registered',
      wristband: { id: 232, color: 'yellow', colorCode: 4, state: 'paired' }
    },
    {
      username: 'Gandalf_deil7sv8j4c',
      name: 'Gandalf',
      surname: 'busy',
      email: 'Gandalf@gmail.com',
      state: 'registered',
      wristband: { id: 233, color: 'yellow', colorCode: 4, state: 'paired' }
    },
    {
      username: 'Galadriel_12k3dw52kkhi',
      name: 'Galadriel',
      surname: 'jovial',
      email: 'Galadriel@gmail.com',
      state: 'registered',
      wristband: { id: 235, color: 'blue', colorCode: 5, state: 'paired' }
    }
  ]
  #+end_src
** list Packages
*** Backend response
#+begin_src js
  const response = {
    timestamp: 1706640606387,
    result: 'OK',
    packages: [
      { name: 'Per Mission 5', amount: 5, type: 'mission', cost: 50 },
      {
        name: 'Per Mission 10',
        amount: 10,
        type: 'mission',
        cost: 100
      },
      {
        name: 'Per Mission 15',
        amount: 15,
        type: 'mission',
        cost: 150
      },
      {
        name: 'Per Mission 20',
        amount: 20,
        type: 'mission',
        cost: 200
      },
      { name: 'Per Time 30', amount: 30, type: 'time', cost: 50 },
      { name: 'Per Time 60', amount: 60, type: 'time', cost: 100 },
      { name: 'Per Time 90', amount: 90, type: 'time', cost: 150 },
      { name: 'Per Time 120', amount: 120, type: 'time', cost: 200 }
    ]
  }
#+end_src
*** After Package.normalization()
#+begin_src js
  // Packege.normalize(packages, { state: "registered" });
  const normalized = [
    {
      id: null,
      name: 'Per Mission 5',
      type: 'mission',
      amount: 5,
      cost: 50,
      t_start: null,
      t_end: null,
      remainder: null,
      state: 'registered'
    },
    {
      id: null,
      name: 'Per Mission 10',
      type: 'mission',
      amount: 10,
      cost: 100,
      t_start: null,
      t_end: null,
      remainder: null,
      state: 'registered'
    },
    {
      id: null,
      name: 'Per Mission 15',
      type: 'mission',
      amount: 15,
      cost: 150,
      t_start: null,
      t_end: null,
      remainder: null,
      state: 'registered'
    },
    {
      id: null,
      name: 'Per Mission 20',
      type: 'mission',
      amount: 20,
      cost: 200,
      t_start: null,
      t_end: null,
      remainder: null,
      state: 'registered'
    },
    {
      id: null,
      name: 'Per Time 30',
      type: 'time',
      amount: 30,
      cost: 50,
      t_start: null,
      t_end: null,
      remainder: null,
      state: 'registered'
    },
    {
      id: null,
      name: 'Per Time 60',
      type: 'time',
      amount: 60,
      cost: 100,
      t_start: null,
      t_end: null,
      remainder: null,
      state: 'registered'
    },
    {
      id: null,
      name: 'Per Time 90',
      type: 'time',
      amount: 90,
      cost: 150,
      t_start: null,
      t_end: null,
      remainder: null,
      state: 'registered'
    },
    {
      id: null,
      name: 'Per Time 120',
      type: 'time',
      amount: 120,
      cost: 200,
      t_start: null,
      t_end: null,
      remainder: null,
      state: 'registered'
    }
  ]
#+end_src

CLOSED: [2024-01-30 Tue 20:58]
** list Cashiers
*** Backend request
#+begin_src js
  {
    timestamp: 1706707779283,
  }
#+end_src
*** Backend response
#+begin_src js
  {
    timestamp: 1706707779283,
    result: 'OK',
    cashiers: [
      { id: 1, username: 'pavlos', email: 'pavlosTester123@gmail.com' },
      { id: 3, username: 'tt', email: 'tt@gmail.com' }
    ]
  }
#+end_src
*** No Normalization required

** list Devices
*** Backend request
#+begin_src js
  {
    timestamp: 1706709130813,
  }
#+end_src
*** Backend response
#+begin_src js
  {
  timestamp: 1706709130813,
  result: 'OK',
  devices: [
    {
      deviceType: 'SCOREBOARD_SCREEN',
      roomType: 'SCOREBOARD1',
      deviceId: 'scor1',
      macAddress: null,
      ipAddress: null,
      bootedTimestamp: 1702243701606
    },
    {
      deviceType: 'SCOREBOARD_SCREEN',
      roomType: 'SCOREBOARD2',
      deviceId: 'scor2',
      macAddress: null,
      ipAddress: null,
      bootedTimestamp: 1702243701625
    },
    {
      deviceType: 'REGISTRATION_SCREEN',
      roomType: 'ADMINISTRATION1',
      deviceId: '001',
      macAddress: null,
      ipAddress: null,
      bootedTimestamp: 1706707719741
    },
    {
      deviceType: 'RPI_READER',
      roomType: 'ADMINISTRATION1',
      deviceId: 'ADMINISTRATION1Reader',
      macAddress: null,
      ipAddress: null,
      bootedTimestamp: 1705889333198
    }
  ]
}
#+end_src
*** No Normalization
** list Scoreboard Devices
*** Backend request
#+begin_src js
  {
    timestamp: 1706711522546,
  }
#+end_src
*** Backend response
#+begin_src js
  {
    timestamp: 1706711522546,
    result: 'OK',
    scoreboardDevices: [
      {
        deviceId: 'scor1',
        deviceType: 'SCOREBOARD_SCREEN',
        roomType: 'SCOREBOARD1',
        status: 'ROTATING'
      },
      {
        deviceId: 'scor2',
        deviceType: 'SCOREBOARD_SCREEN',
        roomType: 'SCOREBOARD2',
        status: 'MONTHLY'
      }
    ]
  }
#+end_src
**** No Normalization
** list Scoreboard Device Views
*** Backend request
#+begin_src js
  {
    timestamp: 1706712075044,
  }
#+end_src
*** Backend response
#+begin_src js
  {
    timestamp: 1706712075044,
    result: 'OK',
    scoreboardStatuses: [
      'ROTATING',
      'ALL_TIME',
      'MONTHLY',
      'WEEKLY',
      'DAILY',
      'ELEMENTS',
      'ROOMS'
    ]
  }
#+end_src
*** No Normalization
** list Teams
*** A team with all Possible Permutations of players and packages
**** Backend response
#+begin_src js
  {
    name: 'friendly_Eomer_c3d',
    totalPoints: 0,
    teamState: 'FINISHED',
    created: 1706472198904,
    lastRegisterAttempt: null,
    currentRoster: {
      version: 1,
      players: [
        {
          username: 'test1',
          wristbandNumber: null,
          wristbandColor: null
        },
        {
          username: 'test2',
          wristbandNumber: 1,
          wristbandColor: 2,
        },
        {
          username: "test3",
          wristbandNumber: 1,
          wristbandColor: null,
        },
        {
          username: "test4",
          wristbandNumber: null,
          wristbandColor: 2,
        },
      ]
    },
    roomType: null,
    packages: [
      { // missions registered
        id: 1,
        name: 'Per Mission 5',
        cost: null,
        started: null,
        ended: null,
        missions: 5,
        missionsPlayed: 0,
        active: false
      },
      { // missions being played
        id: 2,
        name: 'Per Mission 10',
        cost: null,
        started: 1706686189153,
        ended: null,
        missions: 10,
        missionsPlayed: 5,
        active: true
      },
      { // missions completed
        id: 3,
        name: 'Per Mission 20',
        cost: null,
        started: 1706686189153,
        ended: 1706686199999,
        missions: 20,
        missionsPlayed: 20,
        active: false,
      },
      { // time registered
        id: 8,
        name: 'Per Time 30',
        cost: null,
        started: null,
        ended: null,
        duration: 1800,
        paused: false,
        active: false
      },
      { // time being played
        id: 5,
        name: 'Per Time 60',
        cost: null,
        started: 1706685129723,
        ended: null,
        duration: 5400,
        paused: false,
        active: true
      },
      { // time finished
        id: 3,
        name: 'Per Time 90',
        cost: null,
        started: 1706473426225,
        ended: 1706478843795,
        duration: 1800,
        paused: false,
        active: false
      },
    ]
  }
#+end_src
**** After Team.normalize()
#+begin_src js
  // Team.normalize(response, { depth: 2 });
  {
    name: 'friendly_Eomer_c3d',
    t_created: 1706472198904,
    points: 0,
    packages: [
      {
        id: 1,
        name: 'Per Mission 5',
        type: 'mission',
        amount: 5,
        cost: 0,
        t_start: null,
        t_end: null,
        remainder: 5,
        state: 'registered'
      },
      {
        id: 2,
        name: 'Per Mission 10',
        type: 'mission',
        amount: 10,
        cost: 0,
        t_start: 1706686189153,
        t_end: null,
        remainder: 5,
        state: 'playing'
      },
      {
        id: 3,
        name: 'Per Mission 20',
        type: 'mission',
        amount: 20,
        cost: 0,
        t_start: 1706686189153,
        t_end: 1706686199999,
        remainder: 0,
        state: 'completed'
      },
      {
        id: 8,
        name: 'Per Time 30',
        type: 'time',
        amount: 30,
        cost: 0,
        t_start: null,
        t_end: null,
        remainder: 0,
        state: 'registered'
      },
      {
        id: 5,
        name: 'Per Time 60',
        type: 'time',
        amount: 90,
        cost: 0,
        t_start: 1706685129723,
        t_end: null,
        remainder: 0,
        state: 'playing'
      },
      {
        id: 3,
        name: 'Per Time 90',
        type: 'time',
        amount: 30,
        cost: 0,
        t_start: 1706473426225,
        t_end: 1706478843795,
        remainder: 0,
        state: 'completed'
      }
    ],
    roster: [
      {
        username: 'test1',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: null, color: '', colorCode: null, state: 'unpaired' }
      },
      {
        username: 'test2',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: 1, color: 'purple', colorCode: 2, state: 'paired' }
      },
      {
        username: 'test3',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: 1, color: '', colorCode: null, state: 'paired' }
      },
      {
        username: 'test4',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: null, color: 'purple', colorCode: 2, state: 'unpaired' }
      }
    ],
    state: 'registered'
  }
#+end_src
*** RUNNING PACKAGE Team
**** Backend response
#+begin_src js
  {
    name: 'inspiring_Goldberry',
    totalPoints: 0,
    teamState: 'PACKAGE_RUNNING',
    created: 1706684656827,
    lastRegisterAttempt: null,
    currentRoster: {
      version: 1,
      players: [
        {
          username: 'Sauron_0h96h9q4xixv',
          wristbandNumber: 241,
          wristbandColor: 2
        },
        { username: 'ppone', wristbandNumber: 240, wristbandColor: 1 }
      ]
    },
    roomType: null,
    packages: [
      {
        id: 5,
        name: 'Per Time 90',
        cost: null,
        started: 1706685129723,
        ended: null,
        duration: 5400,
        paused: false,
        active: true
      }
    ]
  }
#+end_src
**** After Team.normalize()
#+begin_src js
  // Team.normalize(response, { depth: 2 })
  {
    name: 'inspiring_Goldberry',
    t_created: 1706684656827,
    points: 0,
    packages: [
      {
        id: 5,
        name: 'Per Time 90',
        type: 'time',
        amount: 90,
        cost: 0,
        t_start: 1706685129723,
        t_end: null,
        remainder: 0,
        state: 'playing'
      }
    ],
    roster: [
      {
        username: 'Sauron_0h96h9q4xixv',
        name: '',
        surname: '',
        email: '',
        state: 'playing',
        wristband: { id: 241, color: 'purple', colorCode: 2, state: 'paired' }
      },
      {
        username: 'ppone',
        name: '',
        surname: '',
        email: '',
        state: 'playing',
        wristband: { id: 240, color: 'red', colorCode: 1, state: 'paired' }
      }
    ],
    state: 'playing'
  }
#+end_src
*** FINISHED Team
**** Backend response
#+begin_src js
    {
    name: 'friendly_Eomer_c3d',
    totalPoints: 0,
    teamState: 'FINISHED',
    created: 1706472198904,
    lastRegisterAttempt: null,
    currentRoster: {
      version: 1,
      players: [
        {
          username: '0a5sh6llqf3v',
          wristbandNumber: null,
          wristbandColor: null
        },
        {
          username: '3q0vtxg1o7s',
          wristbandNumber: null,
          wristbandColor: null
        }
      ]
    },
    roomType: null,
    packages: [
      {
        id: 1,
        name: 'Per Mission 10',
        cost: null,
        started: 1706472302416,
        ended: 1706475903814,
        missions: 10,
        missionsPlayed: 0,
        active: false
      }
    ]
  }
#+end_src
**** After Team.normalize()
#+begin_src js
  // Team.normalize(response, { depth: 2 });
  {
    name: 'friendly_Eomer_c3d',
    t_created: 1706472198904,
    points: 0,
    packages: [
      {
        id: 1,
        name: 'Per Mission 10',
        type: 'mission',
        amount: 10,
        cost: 0,
        t_start: 1706472302416,
        t_end: 1706475903814,
        remainder: 10,
        state: 'completed'
      }
    ],
    roster: [
      {
        username: '0a5sh6llqf3v',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: null, color: '', colorCode: null, state: 'unpaired' }
      },
      {
        username: '3q0vtxg1o7s',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: null, color: '', colorCode: null, state: 'unpaired' }
      }
    ],
    state: 'registered'
  }
#+end_src
*** PENDING PACKAGE Team
**** Backend response
#+begin_src js
  {
  name: 'inspiring_Goldberry',
  totalPoints: 0,
  teamState: 'PENDING_PACKAGES',
  created: 1706684656827,
  lastRegisterAttempt: null,
  currentRoster: {
    version: 1,
    players: [
      { username: 'ppone', wristbandNumber: 240, wristbandColor: 1 },
      {
        username: 'Sauron_0h96h9q4xixv',
        wristbandNumber: 241,
        wristbandColor: 2
      }
    ]
  },
  roomType: null,
  packages: []
}
#+end_src
**** After Team.normalize()
#+begin_src js
  // Team.normalize(response, { depth: 2 });
  {
    name: 'inspiring_Goldberry',
    t_created: 1706684656827,
    points: 0,
    packages: [],
    roster: [
      {
        username: 'ppone',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: 240, color: 'red', colorCode: 1, state: 'paired' }
      },
      {
        username: 'Sauron_0h96h9q4xixv',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: 241, color: 'purple', colorCode: 2, state: 'paired' }
      }
    ],
    state: 'registered'
  }
#+end_src
*** LOADED PACKAGE Team
**** Backend response
#+begin_src js
    {
    name: 'inspiring_Goldberry',
    totalPoints: 0,
    teamState: 'LOADED_PACKAGES',
    created: 1706684656827,
    lastRegisterAttempt: null,
    currentRoster: {
      version: 1,
      players: [
        {
          username: 'Sauron_0h96h9q4xixv',
          wristbandNumber: 241,
          wristbandColor: 2
        },
        { username: 'ppone', wristbandNumber: 240, wristbandColor: 1 }
      ]
    },
    roomType: null,
    packages: [
      {
        id: 4,
        name: 'Per Mission 20',
        cost: null,
        started: null,
        ended: null,
        missions: 20,
        missionsPlayed: 0,
        active: false
      },
    ]
  }
#+end_src
**** After Team.normalize()
#+begin_src js
  // Team.normalize(response, { depth: 2 });
  {
    name: 'inspiring_Goldberry',
    t_created: 1706684656827,
    points: 0,
    packages: [
      {
        id: 4,
        name: 'Per Mission 20',
        type: 'mission',
        amount: 20,
        cost: 0,
        t_start: null,
        t_end: null,
        remainder: 20,
        state: 'registered'
      }
    ],
    roster: [
      {
        username: 'Sauron_0h96h9q4xixv',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: 241, color: 'purple', colorCode: 2, state: 'paired' }
      },
      {
        username: 'ppone',
        name: '',
        surname: '',
        email: '',
        state: 'inTeam',
        wristband: { id: 240, color: 'red', colorCode: 1, state: 'paired' }
      }
    ],
    state: 'registered'
  }
#+end_src
