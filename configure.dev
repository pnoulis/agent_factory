#!/usr/bin/env bash

mode=development
node_env=development
skip_npm_install=true
installdirs_preset=gnu-prefix
buildir_stem=build
loglevel=debug
client_url='http://localhost:5173'
server_url='mqtt://localhost:9001/themaze'
device_id='001'
device_type=REGISTRATION_SCREEN
device_roomname=ADMINISTRATION_1

args="--mode=$mode \
--node-env=$node_env \
--with-installdirs-preset=$installdirs_preset \
--buildir-stem=$buildir_stem \
--loglevel=$loglevel \
--afadmin-client-url-local=$client_url \
--afadmin-server-url=$server_url \
--device-id=$device_id \
--device-type=$device_type \
--device-roomname=$device_roomname"

if [ "${1:-}" != '--dont-skip-npm-install' ]; then
    args+=" --skip-npm-install"
fi

./configure $args
