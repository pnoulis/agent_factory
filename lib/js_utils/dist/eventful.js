function i(e,t=[]){let s=e.prototype;Object.defineProperties(s,{events:{value:[...t,"error"],enumerable:!0,writable:!0},packageListener:{value:u,enumerable:!0,writable:!1},ensureEvent:{value:h,enumerable:!0,writable:!1},on:{value:l,enumerable:!0,writable:!1},once:{value:a,enumerable:!0,writable:!1},hasEvent:{value:f,enumerable:!0,writable:!1},flush:{value:o,enumerable:!0,writable:!1},emit:{value:c,enumerable:!0,writable:!1}})}function u(e,t={}){return{listener:e,persistent:t.persist??!0}}function h(e){if(!Object.hasOwn(this.events,e)){let t=new Error(`Unrecognized event: ${e}`);throw this.emit("error",t),t}}function l(e,t){return this.ensureEvent(e),this.events[e].push(this.packageListener(t,{persist:!0})),()=>this.flush(e,t)}function a(e,t){return this.ensureEvent(e),this.events[e].push(this.packageListener(t,{persist:!1})),()=>this.flush(e,t)}function f(e){return Object.hasOwn(this.events,e)}function o(e,t,n){return/^\*$/.test(e)?Object.keys(this.events).forEach(s=>this.flush(s,t,n)):(this.ensureEvent(e),typeof t=="function"?this.events[e]=this.events[e].filter(s=>s.listener!==t):typeof t=="string"?this.events[e]=this.events[e].filter(s=>s.id!==t):typeof n=="function"?this.events[e]=this.events[e].reduce((s,r)=>n(r)?s:[...s,r],[]):this.events[e]=[],this)}function c(e,...t){return this.ensureEvent(e),[...this.events[e]].forEach(n=>n.listener&&n.listener(...t)),this.events[e]=this.events[e].filter(({listener:n,persistent:s})=>s),this}i.construct=function(){let e={};for(let t=0;t<this.events.length;t++)e[this.events[t]]=[];this.events=e};export{i as eventful};
