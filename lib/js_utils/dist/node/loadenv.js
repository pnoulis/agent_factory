import c from"node:process";import i from"node:path";import s from"node:fs";function m(){return c.cwd()}function t(e){return e?e=i.resolve(e):e=m(),function r(o){return o===i.sep?null:d(o)&&o||r(i.dirname(o))}(e)}function d(e){return p(e,"package.json")}function p(e,r){let o=new RegExp(r),n=s.readdirSync(e,{encoding:"utf8"});for(let f of n)if(o.test(f))return`${e}/${f}`;return null}import a from"node:os";import g from"node:path";import*as u from"node:fs";import w from"node:process";function D(e,r){if(e)e=g.resolve(e);else if(e=t(w.cwd()),!e)throw new Error("loadenv() could not locate environment file.");/\/?env[^\/]*$/.test(e)||(e+="/.env");let o;try{o=u.readFileSync(e,{encoding:"utf8",flag:"r"})}catch(n){throw new Error(`loadenv() failed to read: ${e}`,{cause:n})}if(r){for(let[n,f]of l(o))r[n]=f;return r}else return l(o)}function l(e){return e.split(a.EOL).map(r=>r.split("=")).filter(([r,o])=>!!r)}export{D as loadenv};
